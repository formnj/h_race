<div class="modal_header">
    <h3>약관동의</h3>
    <button class="btn_close" onclick="modal.close(event);">close</button>
</div>
<div class="modal_content">
    <dl class="policy_check_list">
        <dt>
            <label class="check type_02">
                <input type="checkbox" name="group">
                <em class="label">모두 동의</em>
            </label>
        </dt>
        <dd>
            <ul>
                <li>
                    <label class="check">
                        <input type="checkbox" name="group">
                        <em class="label">(필수) NICE평가정보 본인확인서비스 이용약관</em>
                    </label>
                    <button>약관보기</button>
                </li>
                <li>
                    <label class="check">
                        <input type="checkbox" name="group">
                        <em class="label">(필수) 통신사 본인확인서비스 이용약관</em>
                    </label>
                    <button>약관보기</button>
                </li>
                <li>
                    <label class="check">
                        <input type="checkbox" name="group">
                        <em class="label">(필수) 통신사 개인정보 수집 및 이용동의</em>
                    </label>
                    <button>약관보기</button>
                </li>
                <li>
                    <label class="check">
                        <input type="checkbox" name="group">
                        <em class="label">(필수) 통신사 고유식별정보 처리 등의관</em>
                    </label>
                    <button>약관보기</button>
                </li>
            </ul>
        </dd>
    </dl>
</div>
<div class="btnSection">
    <button class="btn_confirm" onclick="modal.close(event);">
        <em>확인</em>
    </button>
</div>

<script>
    /* 퍼블 테스트 용 기능 */
    document.querySelector('.btn_confirm').addEventListener('click', function(){
        document.querySelector('.icon_reset').click();
    });
    /* //퍼블 테스트 용 기능 */

    /* 약관 전체 동의 */
    $('.policy_check_list').delegate('.check input', 'change', function(){
        console.log($(this).parent().parent()[0].nodeName);
        if($(this).parent().parent()[0].nodeName == 'DT'){
            if($(this).is(':checked')){
                $(this).closest('.policy_check_list').find('.check input').prop('checked', true);
            } else {
                console.log('else')
                $(this).closest('.policy_check_list').find('.check input').prop('checked', false);
            }
        } else {
            var all_leng = $(this).closest('ul').find('li').length,
                chk_leng = $(this).closest('ul').find('.check input:checked').length;
            if(all_leng == chk_leng){
                $(this).closest('.policy_check_list').find('dt .check input').prop('checked', true);
            } else {
                $(this).closest('.policy_check_list').find('dt .check input').prop('checked', false);
            }
        }        
    });
</script>